## 2024-05-22 - [Data Loss Risk in File Replacement] **Erreur :** Suppression du fichier original avant le déplacement réussi du nouveau fichier. **Cause :** Séquence `os.remove(orig)` puis `shutil.move(new, orig)`. Si `move` échoue, l'original est perdu. **Prévention :** Toujours utiliser "Move-then-Delete" ou des opérations atomiques (`os.replace`) quand c'est possible.

## 2024-05-22 - [Mocking Hybrid Inheritance] **Erreur :** `TypeError: metaclass conflict` lors du mock de classes héritant de `ctk.CTk` et `TkinterDnD.DnDWrapper`. **Cause :** `MagicMock` a sa propre métaclasse qui conflit avec les bases si elles sont mockées comme `MagicMock` instances. **Prévention :** Mocker les classes de base (`CTk`, `DnDWrapper`) comme des classes Python standard (`class MockCTk: ...`) au lieu d'instances `MagicMock` dans `sys.modules`.
